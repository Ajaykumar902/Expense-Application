<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./Tracker.css">

  </head>
  <body>
    <div class="header">
        <p class="m-0">Expense<br/>Tracker</p>
    </div>
    <div class="input-form">
        <div class="form-floating inputs">
        <input type="date" class="form-control date-input" id="floatingInput" placeholder="name@example.com">
        <label for="floatingInput">Date</label>
        </div>

        <div class="form-floating inputs">
        <input type="number" class="form-control amount-input" id="floatingInput" placeholder="name@example.com">
        <label for="floatingInput">Amount</label>
        </div>

        <select class="form-select inputs transaction-type" aria-label="Default select example">
        <option selected>Transaction Type</option>
        <option value="Income">Income</option>
        <option value="Expense">Expense</option>
        </select>
        
        <button class="btn" id="add-button" onclick="addRow()">+</button>
    </div>

    <div class="cards mt-4">
            <div class="card">
            <div class="card-body">
                <h5 class="card-title m-0"> üí∞  Total  Income</h5>
                <h1><span id="total-income">0</span></h1>
                
            </div>
            </div>

            <div class="card">
            <div class="card-body">
                <h5 class="card-title">üí∏ Total Expense</h5>
                <h1><span id="total-expense">0</span></h1>
            </div>
            </div>

            <div class="card">
            <div class="card-body">
                <h5 class="card-title">üìä Balance</h5>
                <h1><span id="balance">0</span></h1>
            </div>
            </div>
    </div>

    <table class="transaction-table mt-3" id="table">
        <tr id="header-row">
        <th>üíµ Amount</th>
        <th>üîÑ Transaction Type</th>
        <th>üìÖ Transaction Date</th>
        <th>üóëÔ∏è Action</th>
        </tr>
                
    </table>

    <script>
        let table=document.getElementById("table");
        
        function deleteRow(row){
            row.remove()
        }
        
        function addRow()
        {
            let date=document.getElementsByClassName("date-input")[0].value
            let amount=document.getElementsByClassName('amount-input')[0].value
            let transactionType=document.getElementsByClassName("transaction-type")[0].value
            let row=document.createElement('tr');
            if(date=='' || amount=='' || transactionType=="Transaction Type"){
                alert("Please fill all fields!");
                return;
            }else{

            let amountCell=document.createElement('td')
            amountCell.innerText=amount

            let transactionCell=document.createElement('td')
            transactionCell.innerText=transactionType

            let dateCell=document.createElement('td')
            dateCell.innerText=date

            let binCell=document.createElement('td')
  
            let deleteButton=document.createElement('button')
            deleteButton.innerText="üóëÔ∏è"
            deleteButton.classList.add("delete-btn")
            deleteButton.onclick=()=>deleteRow(row)

            binCell.appendChild(deleteButton)
            
            row.appendChild(amountCell)
            row.appendChild(transactionCell)
            row.appendChild(dateCell)
            row.appendChild(binCell)

            table.appendChild(row)

            let totalIncome=document.getElementById('total-income').innerText
            let totalExpense=document.getElementById('total-expense').innerText
            let balance=document.getElementById('balance').innerText

            if(transactionType=="Income"){
            document.getElementById('total-income').innerText=parseInt(totalIncome)+parseInt(amount)
            document.getElementById('balance').innerText=parseInt(balance)+parseInt(amount)
            }
            else if(transactionType=="Expense"){
                document.getElementById('total-expense').innerText=parseInt(totalExpense)+parseInt(amount)
                document.getElementById('balance').innerText=parseInt(balance)-parseInt(amount)
            }
        }   
    }
    
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
  </body>
</html>